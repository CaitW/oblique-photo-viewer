<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/js/classes/ObliquePhotoMap.js | oblique-photo-viewer</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Oblique Photo Viewer"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="oblique-photo-viewer"><meta property="twitter:description" content="Oblique Photo Viewer"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/CaitW/oblique-photo-viewer.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js">js</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPhotoURLs">getPhotoURLs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getProfileURLs">getProfileURLs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getActiveBasemapId">getActiveBasemapId</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getActiveLayerStyleTypes">getActiveLayerStyleTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getActiveLayers">getActiveLayers</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getBasemapsByIdWithData">getBasemapsByIdWithData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getLayerGroupsByIdWithData">getLayerGroupsByIdWithData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getLayersByIdWithData">getLayersByIdWithData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getMobileFeaturePopupProps">getMobileFeaturePopupProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mapLayerGroupsToLayers">mapLayerGroupsToLayers</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-store">store</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BASEMAPS_BY_ID">BASEMAPS_BY_ID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-LAYERS_BY_ID">LAYERS_BY_ID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-LAYER_GROUPS_BY_ID">LAYER_GROUPS_BY_ID</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-classes">js/classes</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/classes/ObliquePhotoMap.js~ObliquePhotoMap.html">ObliquePhotoMap</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-components">js/components</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AboutButton">AboutButton</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Basemap">Basemap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-BasemapList">BasemapList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Layer">Layer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-LayerGroup">LayerGroup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-LegendLayer">LegendLayer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-LegendStyle">LegendStyle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-MobileToggle">MobileToggle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ResetView">ResetView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ZoomToShoreline">ZoomToShoreline</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-components-featurepopups">js/components/FeaturePopups</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/components/FeaturePopups/FeaturePopup.jsx~FeaturePopup.html">FeaturePopup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/components/FeaturePopups/PinnedFeaturePopup.jsx~PinnedFeaturePopup.html">PinnedFeaturePopup</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-components-featurepopups-components">js/components/FeaturePopups/components</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/components/FeaturePopups/components/PopupTabs.jsx~PopupTabs.html">PopupTabs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-PopupFooter">PopupFooter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-PopupTitle">PopupTitle</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-components-featurepopups-components-tabs">js/components/FeaturePopups/components/tabs</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/components/FeaturePopups/components/tabs/DataTab.jsx~DataTab.html">DataTab</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/components/FeaturePopups/components/tabs/ProfileTab.jsx~ProfileTab.html">ProfileTab</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/components/FeaturePopups/components/tabs/RecessionTab.jsx~RecessionTab.html">RecessionTab</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ImageTab">ImageTab</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-containers">js/containers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/containers/Sidebar.jsx~Sidebar.html">Sidebar</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-ducks">js/ducks</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-basemapError">basemapError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-basemapLoaded">basemapLoaded</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-basemapPreload">basemapPreload</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-basemaps">basemaps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toggleBasemap">toggleBasemap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-layerError">layerError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-layerLoaded">layerLoaded</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-layerPreload">layerPreload</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-layers">layers</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-legendStyleUpdate">legendStyleUpdate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toggleLayer">toggleLayer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-doneZooming">doneZooming</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-leafletPopupOpened">leafletPopupOpened</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-map">map</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mapMousedown">mapMousedown</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mapNewZoomLevel">mapNewZoomLevel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-resetMapView">resetMapView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-zoomToShoreline">zoomToShoreline</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-closeMobileFeatureModal">closeMobileFeatureModal</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-closeMobileLayerList">closeMobileLayerList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mobile">mobile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mobileClickFeature">mobileClickFeature</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-openMobileLayerList">openMobileLayerList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-updateWindowDimensions">updateWindowDimensions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nav">nav</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setNavExpand">setNavExpand</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-closePinnedFeature">closePinnedFeature</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-newPinnedFeature">newPinnedFeature</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-pinnedFeatures">pinnedFeatures</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-layers">js/layers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getFeatureLayer">getFeatureLayer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-onEachFeature">onEachFeature</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-LAYER_STYLE">LAYER_STYLE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FORTY_TO_SIXTY">FORTY_TO_SIXTY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GREATER_THAN_SIXTY">GREATER_THAN_SIXTY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GREATER_THAN_TWENTY">GREATER_THAN_TWENTY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NO_RECESSION">NO_RECESSION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TEN_TO_TWENTY">TEN_TO_TWENTY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TWENTY_TO_FORTY">TWENTY_TO_FORTY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ZERO_TO_TEN">ZERO_TO_TEN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ZERO_TO_TWENTY">ZERO_TO_TWENTY</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-lib">js/lib</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AddMousePosition">AddMousePosition</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-wrappers">js/wrappers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-MapWrapper">MapWrapper</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/js/classes/ObliquePhotoMap.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import axios from &quot;axios&quot;
import { unmountComponentAtNode } from &quot;react-dom&quot;
import L from &quot;leaflet&quot;

// Leaflet Plugins
import AddSVGShapesToLeaflet from &quot;leaflet-svg-shape-markers&quot;
import AddMousePosition from &quot;../lib/AddMousePosition&quot;

import CONFIG from &quot;../config.json&quot;
import LAYER_STYLE from &quot;../layers/layerStyles&quot;
import { onEachFeature } from &quot;../layers/layerFeatures&quot;
import { mapNewZoomLevel, mapMousedown, doneZooming } from &quot;../ducks/map&quot;
import { layerPreload, layerLoaded, layerError } from &quot;../ducks/layers&quot;
import { basemapPreload, basemapLoaded, basemapError } from &quot;../ducks/basemaps&quot;
import store from &quot;../store&quot;

/**
 * The main class that contains the Leaflet-based map component
 */
export default class ObliquePhotoMap {
  /**
   * Leaflet popups are tied into React, and the react nodes need to be
   * manually added / removed. The below function removes the React node
   * when a popup is closed
   */
  static onPopupClose(e) {
    const container = e.popup.getContent()
    /**
     * setTimeout hack to get around this current issue with React:
     * https://github.com/facebook/react/issues/3298
     */
    setTimeout(() =&gt; {
      unmountComponentAtNode(container)
    }, 10)
  }

  /**
   * Dispatch a map action every time the user clicks the map
   */
  static onMapMousedown() {
    store.dispatch(mapMousedown())
  }

  /**
   * @param {string} map - the string ID of the html element that the map will be added to
   */
  constructor(map) {
    const self = this
    this.basemapGroup = L.layerGroup()
    this.layerGroup = L.layerGroup()
    this.map = L.map(map, {
      maxBounds: CONFIG.map.maxExtent,
      layers: [self.basemapGroup, self.layerGroup],
      inertia: false
    }).fitBounds(CONFIG.map.wisconsinExtent, {
      padding: [10, 10]
    })
    // shims to add non-es6 plugins
    AddMousePosition(L)
    AddSVGShapesToLeaflet(L)
    L.control.mousePosition().addTo(self.map)
    L.control.scale().addTo(self.map)
    this.basemapIndex = {}
    this.layerIndex = {}
    this.dispatchZoom = this.dispatchZoom.bind(this)
    this.updateSize = this.updateSize.bind(this)
    this.zoomToPopup = this.zoomToPopup.bind(this)
    this.map.on(&quot;zoomend&quot;, self.dispatchZoom)
    this.map.on(&quot;mousedown&quot;, self.constructor.onMapMousedown)
    this.map.on(&quot;popupclose&quot;, self.constructor.onPopupClose)
    // set some default values
    this.dispatchZoom()
  }

  /**
   * Dispatch a zoom action every time the map is zoomed
   */
  dispatchZoom() {
    const currentZoom = this.map.getZoom()
    store.dispatch(mapNewZoomLevel(currentZoom))
  }

  /**
   * Create a new map layer
   * @param {string} layerId - a unique identifier for a layer
   * @param {Object} layer - key/value pairs describing a layer
   */
  createLayer(layerId, layer) {
    const self = this
    store.dispatch(layerPreload(layerId))
    switch (layer.type) {
      case &quot;tileLayer&quot;:
        if (typeof layer.url === &quot;undefined&quot;) {
          console.error(&quot;Layer &quot; + layerId + &quot; must have a tile URL&quot;)
        } else {
          this.layerIndex[layerId] = L.tileLayer(layer.url, {
            zIndex: 1
          })
          this.layerIndex[layerId].once(&quot;load&quot;, () =&gt; {
            store.dispatch(layerLoaded(layerId))
          })
          this.layerIndex[layerId].once(&quot;tileerror&quot;, () =&gt; {
            store.dispatch(layerError(layerId))
          })
        }
        break
      case &quot;geojson&quot;:
        if (typeof layer.dataLocation === &quot;undefined&quot;) {
          console.error(&quot;Layer &quot; + layerId + &quot; must have a data location&quot;)
        } else {
          const layerOptions = {
            pointToLayer(feature, latlng) {
              let marker
              switch (layer.displayType) {
                case &quot;square&quot;:
                  marker = new L.ShapeMarker(latlng, {
                    shape: &quot;square&quot;,
                    radius: 4,
                    layerId
                  })
                  break
                case &quot;triangle&quot;:
                  marker = new L.ShapeMarker(latlng, {
                    shape: &quot;triangle&quot;,
                    radius: 4,
                    layerId
                  })
                  break
                default:
                  marker = L.circleMarker(latlng, {
                    layerId
                  })
                  break
              }
              return marker
            },
            layerId
          }
          layerOptions.onEachFeature = onEachFeature(layerId, self.map)
          layerOptions.style = LAYER_STYLE(layerId)
          this.layerIndex[layerId] = L.geoJson(null, layerOptions)
          axios
            .get(layer.dataLocation)
            .then(response =&gt; {
              self.layerIndex[layerId].addData(response.data)
              store.dispatch(layerLoaded(layerId))
            })
            .catch(error =&gt; {
              console.error(error)
              store.dispatch(layerError(layerId))
            })
        }
        break
      default:
        console.error(&quot;Unrecognized layer type in config&quot;)
        store.dispatch(layerError(layerId))
        break
    }
  }

  /**
   * Toggle a layer on or off
   * - Create a layer if it doesn&apos;t exist
   * - Toggle it if it already exists and is in the map
   *
   * @param {string} layerId - a unique identifier for a layer
   * @param {Object} layer - key/value pairs describing a layer
   */
  toggleLayer(layerId, layer) {
    if (typeof this.layerIndex[layerId] === &quot;undefined&quot;) {
      this.createLayer(layerId, layer)
    }
    if (layer.active === true) {
      this.layerGroup.addLayer(this.layerIndex[layerId])
    } else {
      this.layerGroup.removeLayer(this.layerIndex[layerId])
    }
  }

  /**
   * Toggle a basemap on or off
   * - Create if it doesn&apos;t exist
   * - Toggle it if it already exists
   *
   * @param {string} basemapId - a unique identifier for a layer
   * @param {Object} basemap - key/value pairs describing a layer
   */
  toggleBasemap(basemapId, basemap) {
    const self = this
    if (typeof basemap.url === &quot;undefined&quot;) {
      console.error(&quot;Basemap &quot; + basemapId + &quot; must have a tile URL&quot;)
    } else {
      if (typeof this.basemapIndex[basemapId] === &quot;undefined&quot;) {
        this.basemapIndex[basemapId] = L.tileLayer(basemap.url, {
          zIndex: 0
        })
      }
      if (basemap.active === true) {
        this.basemapGroup.clearLayers()
        store.dispatch(basemapPreload(basemapId))
        self.basemapIndex[basemapId].once(&quot;load&quot;, () =&gt; {
          store.dispatch(basemapLoaded(basemapId))
        })
        self.basemapIndex[basemapId].once(&quot;tileerror&quot;, () =&gt; {
          store.dispatch(basemapError(basemapId))
        })
        this.basemapGroup.addLayer(self.basemapIndex[basemapId])
      }
    }
  }

  /**
   * Zoom to an extent
   * - wrapper for the Leaflet function map.fitBounds with added padding
   *
   * @param {LatLngBounds|Array[]} extent - [[lat, lng],[lat, lng]]
   */
  zoomToExtent(extent) {
    this.map.fitBounds(extent, {
      padding: [10, 10]
    })
    store.dispatch(doneZooming())
  }

  /**
   * Pan and Zoom to a location
   * - wrapper for the Leaflet function map.setView
   *
   * @param {number} zoom - zoom level
   * @param {LatLng} coordinates - [lat, lng]
   */
  panAndZoom(zoom, coordinates) {
    this.map.setView(coordinates, zoom)
    store.dispatch(doneZooming())
  }

  /**
   *
   * @param {number} zoom - zoom level
   * @param {LatLng} coordinates - [lat, lng]
   */
  zoomToPopup(zoom, coordinates) {
    this.map.panTo(coordinates, {
      animate: true
    })
    this.map.once(&quot;moveend&quot;, () =&gt; {
      this.map.setZoom(zoom, {
        animate: true
      })
    })
  }

  /**
   * Force leaflet to re-calculate the size of the map within its bounding div
   * - wrapper for the Leaflet function invalidateSize
   */
  updateSize() {
    this.map.invalidateSize()
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
